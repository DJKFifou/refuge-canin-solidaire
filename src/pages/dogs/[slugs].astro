---
import Layout from "@/layouts/Layout.astro";
import { urlFor } from "../../../sanity/utilis/image";
import { getDog } from "../../../sanity/utilis/sanity";
import { formatDate } from "../../../sanity/utilis/index";

const { slugs } = Astro.params;
const dog = await getDog(slugs ?? null);
---

{!dog ? (
  <Layout title="Article introuvable">
    <p class="text-center text-gray-500 text-lg mt-8">
      Le dogo demand√© est introuvable
    </p>
  </Layout>
) : (
  <Layout title={dog.title}>
    <article class="max-w-3xl mx-auto px-4 py-12">
      <h1 class="text-4xl font-bold text-gray-900 mb-4">{dog.title}</h1>
      
      {dog.subtitle && (
        <h2 class="text-2xl font-medium text-gray-700 mb-6">{dog.subtitle}</h2>
      )}
      
      {dog.image && (
        <img 
          src={urlFor(dog.image).width(800).height(400).url()} 
          alt={dog.image.alt || dog.title}
          class="w-full h-auto rounded-lg shadow-md mb-8"
        />
      )}
      
      <time 
        datetime={dog.publishedAt}
        class="block text-sm text-gray-500 mb-6"
      >
        {formatDate(dog.publishedAt)}
      </time>
      
      <p class="text-lg leading-relaxed text-gray-800 whitespace-pre-line">
        {dog.description}
      </p>
    </article>
  </Layout>
)}
