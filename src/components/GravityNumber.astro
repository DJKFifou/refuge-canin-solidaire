---
import { gsap } from "gsap";
import { ScrollTrigger } from "gsap/ScrollTrigger";
---

<div class="relative w-full min-h-screen overflow-hidden bg-red-600">
  <div class="gravity-section flex flex-col items-center justify-end w-full min-h-screen border border-white" style="aspect-ratio: 1.5;">
    
    <div class="flex w-full justify-center" style="margin-top: -2.6%;">
      <div class="gravity-item flex items-center justify-center rounded-full transition-shadow" style="width: 20%; aspect-ratio: 1; background-color: #fff; border: 1px solid #9ca3af;">
        <span class="font-bold text-xl text-gray-700">1</span>
      </div>
      <div class="gravity-item flex items-center justify-center rounded-full transition-shadow" style="width: 20%; aspect-ratio: 1; background-color: #fff; border: 1px solid #9ca3af;">
        <span class="font-bold text-xl text-gray-700">2</span>
      </div>
      <div class="gravity-item flex items-center justify-center rounded-full transition-shadow" style="width: 20%; aspect-ratio: 1; background-color: #fff; border: 1px solid #9ca3af;">
        <span class="font-bold text-xl text-gray-700">3</span>
      </div>
    </div>

    <div class="flex w-full justify-center" style="margin-top: -2.6%;">
      <div class="gravity-item flex items-center justify-center rounded-full transition-shadow" style="width: 20%; aspect-ratio: 1; background-color: #fff; border: 1px solid #9ca3af;">
        <span class="font-bold text-xl text-gray-700">4</span>
      </div>
      <div class="gravity-item flex items-center justify-center rounded-full transition-shadow" style="width: 20%; aspect-ratio: 1; background-color: #fff; border: 1px solid #9ca3af;">
        <span class="font-bold text-xl text-gray-700">5</span>
      </div>
      <div class="gravity-item flex items-center justify-center rounded-full transition-shadow" style="width: 20%; aspect-ratio: 1; background-color: #fff; border: 1px solid #9ca3af;">
        <span class="font-bold text-xl text-gray-700">6</span>
      </div>
      <div class="gravity-item flex items-center justify-center rounded-full transition-shadow" style="width: 20%; aspect-ratio: 1; background-color: #fff; border: 1px solid #9ca3af;">
        <span class="font-bold text-xl text-gray-700">7</span>
      </div>
    </div>

    <div class="flex w-full justify-center" style="margin-top: -2.6%;">
      <div class="gravity-item flex items-center justify-center rounded-full transition-shadow" style="width: 20%; aspect-ratio: 1; background-color: #fff; border: 1px solid #9ca3af;">
        <span class="font-bold text-xl text-gray-700">8</span>
      </div>
      <div class="gravity-item flex items-center justify-center rounded-full transition-shadow" style="width: 20%; aspect-ratio: 1; background-color: #fff; border: 1px solid #9ca3af;">
        <span class="font-bold text-xl text-gray-700">9</span>
      </div>
      <div class="gravity-item flex items-center justify-center rounded-full transition-shadow" style="width: 20%; aspect-ratio: 1; background-color: #fff; border: 1px solid #9ca3af;">
        <span class="font-bold text-xl text-gray-700">10</span>
      </div>
      <div class="gravity-item flex items-center justify-center rounded-full transition-shadow" style="width: 20%; aspect-ratio: 1; background-color: #fff; border: 1px solid #9ca3af;">
        <span class="font-bold text-xl text-gray-700">11</span>
      </div>
      <div class="gravity-item flex items-center justify-center rounded-full transition-shadow" style="width: 20%; aspect-ratio: 1; background-color: #fff; border: 1px solid #9ca3af;">
        <span class="font-bold text-xl text-gray-700">12</span>
      </div>
    </div>
  </div>
</div>

<style>
  .gravity-item:hover {
    box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
  }
</style>

<script>
  import { gsap } from "gsap";
  import { ScrollTrigger } from "gsap/ScrollTrigger";

  gsap.registerPlugin(ScrollTrigger);

  window.addEventListener("DOMContentLoaded", () => {
    const rows = document.querySelectorAll(".gravity-section .flex.w-full.justify-center");

    rows.forEach((row, rowIndex) => {
      const items = row.querySelectorAll(".gravity-item");

      gsap.fromTo(
        items,
        {
          y: "-200vh",
          x: 50,
          opacity: 1,
        },
        {
          y: 0,
          x: 0,
          opacity: 1,
          duration: 1.4,
          ease: "bounce.out",
          stagger: {
            each: 0.1,
            from: "start",
          },
          scrollTrigger: {
            trigger: row,
            start: "top 80%",
            toggleActions: "play none none none",
            markers: true,
          },
        }
      );
    });
  });
</script>
